name: { name }
workdir: { workdir }
num_nodes: 1
resources:
  cloud: gcp
  region: us-west1
  instance_type: n1-highcpu-96
  use_spot: True
  disk_size: 250
  disk_tier: 'medium'
  image_id: projects/ecker-wding/global/images/myimage

file_mounts:
  ~/bmzip: ~/Projects/Github/bmzip

setup: |
  conda activate yap && cd ~/bmzip && python setup.py install

run: |
  conda activate yap
  bmzip copy_smk -o job.yaml
  snakemake -s job.yaml --config {indir} {outdir} {allc_path} {reference} {ref_prefix} {chrom} {chrom_prefix} {gcp} --default-remote-prefix {bucket} --default-remote-provider GS --google-lifesciences-region us-west1 --scheduler greedy -j {cpu} -np